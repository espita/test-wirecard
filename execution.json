[
  {
    "uri": "features/payment_wirecard.feature",
    "id": "creating-a-payment",
    "keyword": "Feature",
    "name": "Creating a payment",
    "description": "",
    "line": 4,
    "tags": [
      {
        "name": "@create_payment",
        "line": 2
      }
    ],
    "comments": [
      {
        "value": "# encoding: utf-8",
        "line": 1
      }
    ],
    "elements": [
      {
        "id": "creating-a-payment;creating-order-with-valid-payment",
        "keyword": "Scenario",
        "name": "Creating order with valid payment",
        "description": "",
        "line": 6,
        "type": "scenario",
        "tags": [
          {
            "name": "@create_payment",
            "line": 2
          }
        ],
        "before": [
          {
            "match": {
              "location": "capybara-3.22.0/lib/capybara/cucumber.rb:14"
            },
            "result": {
              "status": "passed",
              "duration": 75553
            }
          },
          {
            "match": {
              "location": "capybara-3.22.0/lib/capybara/cucumber.rb:22"
            },
            "result": {
              "status": "passed",
              "duration": 29883
            }
          },
          {
            "match": {
              "location": "features/support/hook.rb:3"
            },
            "result": {
              "status": "passed",
              "duration": 108127
            }
          }
        ],
        "steps": [
          {
            "keyword": "Given ",
            "name": "that I have a valid creation contract",
            "line": 7,
            "output": [
              "orderCode: 60301086\n"
            ],
            "match": {
              "location": "features/step_definitions/steps.rb:3"
            },
            "result": {
              "status": "passed",
              "duration": 1047212461
            }
          },
          {
            "keyword": "When ",
            "name": "I send the requisition",
            "line": 8,
            "output": [
              "{\"ownId\"=>\"60301086\", \"amount\"=>{\"currency\"=>\"BRL\", \"subtotals\"=>{\"shipping\"=>1000}}, \"items\"=>[{\"product\"=>\"La Fin Du Monde\", \"category\"=>\"FOOD,_BEVERAGES_AND_TOBACCO\", \"quantity\"=>1, \"detail\"=>\"Sour Ale\", \"price\"=>1947}], \"customer\"=>{\"ownId\"=>\"60301086\", \"fullname\"=>\"Russel Berge\", \"email\"=>\"pierremayer@swift.name\", \"birthDate\"=>\"1988-12-30\", \"taxDocument\"=>{\"type\"=>\"CPF\", \"number\"=>\"49526457382\"}, \"phone\"=>{\"countryCode\"=>\"55\", \"areaCode\"=>\"11\", \"number\"=>\"613647987\"}, \"shippingAddress\"=>{\"street\"=>\"Carrol Spring\", \"streetNumber\"=>\"81589\", \"complement\"=>\"Casa\", \"district\"=>\"Paulista\", \"city\"=>\"Sao Paulo\", \"state\"=>\"SP\", \"country\"=>\"BRA\", \"zipCode\"=>\"01234000\"}}}",
              "Response => {\"id\":\"ORD-J3JE74KONVP4\",\"ownId\":\"60301086\",\"status\":\"CREATED\",\"platform\":\"V2\",\"createdAt\":\"2019-06-11T21:58:08.072-03\",\"updatedAt\":\"2019-06-11T21:58:08.072-03\",\"amount\":{\"paid\":0,\"total\":2947,\"fees\":0,\"refunds\":0,\"liquid\":0,\"otherReceivers\":0,\"currency\":\"BRL\",\"subtotals\":{\"shipping\":1000,\"addition\":0,\"discount\":0,\"items\":1947}},\"items\":[{\"product\":\"La Fin Du Monde\",\"price\":1947,\"detail\":\"Sour Ale\",\"quantity\":1,\"category\":\"FOOD,_BEVERAGES_AND_TOBACCO\"}],\"customer\":{\"id\":\"CUS-71KTRT1PRGW0\",\"ownId\":\"60301086\",\"fullname\":\"Russel Berge\",\"createdAt\":\"2019-06-11T21:58:08.073-03\",\"updatedAt\":\"2019-06-11T21:58:08.076-03\",\"birthDate\":\"1988-12-30\",\"email\":\"pierremayer@swift.name\",\"phone\":{\"countryCode\":\"55\",\"areaCode\":\"11\",\"number\":\"13647987\"},\"taxDocument\":{\"type\":\"CPF\",\"number\":\"49526457382\"},\"shippingAddress\":{\"zipCode\":\"01234000\",\"street\":\"Carrol Spring\",\"streetNumber\":\"81589\",\"complement\":\"Casa\",\"city\":\"Sao Paulo\",\"district\":\"Paulista\",\"state\":\"SP\",\"country\":\"BRA\"},\"_links\":{\"self\":{\"href\":\"https://sandbox.moip.com.br/v2/customers/CUS-71KTRT1PRGW0\"},\"hostedAccount\":{\"redirectHref\":\"https://hostedaccount-sandbox.moip.com.br?token=8769344e-f7ac-4d93-a5b6-c3ab090b1bdb&id=CUS-71KTRT1PRGW0&mpa=MPA-7026D0894395\"}}},\"payments\":[],\"escrows\":[],\"refunds\":[],\"entries\":[],\"events\":[{\"type\":\"ORDER.CREATED\",\"createdAt\":\"2019-06-11T21:58:08.072-03\",\"description\":\"\"}],\"receivers\":[{\"moipAccount\":{\"id\":\"MPA-7026D0894395\",\"login\":\"edson.pita.sp@gmail.com\",\"fullname\":\"Edson Pita Distribui����o e Com��rcio LTDA\"},\"type\":\"PRIMARY\",\"amount\":{\"total\":2947,\"currency\":\"BRL\",\"fees\":0,\"refunds\":0},\"feePayor\":true}],\"shippingAddress\":{\"zipCode\":\"01234000\",\"street\":\"Carrol Spring\",\"streetNumber\":\"81589\",\"complement\":\"Casa\",\"city\":\"Sao Paulo\",\"district\":\"Paulista\",\"state\":\"SP\",\"country\":\"BRA\"},\"_links\":{\"self\":{\"href\":\"https://sandbox.moip.com.br/v2/orders/ORD-J3JE74KONVP4\"},\"checkout\":{\"payCheckout\":{\"redirectHref\":\"https://checkout-new-sandbox.moip.com.br?token=4319e1c5-fa2e-4186-accc-7839f8bdd87c&id=ORD-J3JE74KONVP4\"},\"payCreditCard\":{\"redirectHref\":\"https://checkout-new-sandbox.moip.com.br?token=4319e1c5-fa2e-4186-accc-7839f8bdd87c&id=ORD-J3JE74KONVP4&payment-method=credit-card\"},\"payBoleto\":{\"redirectHref\":\"https://checkout-new-sandbox.moip.com.br?token=4319e1c5-fa2e-4186-accc-7839f8bdd87c&id=ORD-J3JE74KONVP4&payment-method=boleto\"},\"payOnlineBankDebitItau\":{\"redirectHref\":\"https://checkout-sandbox.moip.com.br/debit/itau/ORD-J3JE74KONVP4\"}}}}\n\n"
            ],
            "match": {
              "location": "features/step_definitions/steps.rb:23"
            },
            "result": {
              "status": "passed",
              "duration": 907024930
            }
          },
          {
            "keyword": "Then ",
            "name": "I receive confirmation of the creation",
            "line": 9,
            "output": [
              "Id Wirecard: ORD-J3JE74KONVP4\n\n"
            ],
            "match": {
              "location": "features/step_definitions/steps.rb:30"
            },
            "result": {
              "status": "passed",
              "duration": 2504493
            }
          },
          {
            "keyword": "And ",
            "name": "I send the requisition to create a payment",
            "line": 10,
            "output": [
              "Faker::IDNumber",
              "Response => {\"errors\":[{\"code\":\"API-1\",\"description\":\"Estrutura de JSON inv��lida (Expected BEGIN_OBJECT but was STRING at line 1 column 2)\"}]}\n\n"
            ],
            "match": {
              "location": "features/step_definitions/steps.rb:44"
            },
            "result": {
              "status": "passed",
              "duration": 647491171
            }
          },
          {
            "keyword": "Then ",
            "name": "I receive confirmation of the creation",
            "line": 11,
            "match": {
              "location": "features/step_definitions/steps.rb:30"
            },
            "result": {
              "status": "failed",
              "error_message": "\n• RESPONSE CODE: 400\n                  \n• RESPONSE ERROR MSG: Bad Request\n                  \n• RESPONSE BODY: {\"errors\":[{\"code\":\"API-1\",\"description\":\"Estrutura de JSON inválida (Expected BEGIN_OBJECT but was STRING at line 1 column 2)\"}]}\n                  \n• RESPONSE HEADERS: {\"server\"=>[\"nginx\"], \"date\"=>[\"Wed, 12 Jun 2019 00:58:08 GMT\"], \"content-type\"=>[\"application/json\"], \"content-length\"=>[\"131\"], \"connection\"=>[\"close\"], \"x-content-type-options\"=>[\"nosniff\"], \"vary\"=>[\"Accept-Encoding, Origin\"]}\n                  \n• REQUEST BODY: \n                  \n\n\n (RuntimeError)\n./features/classes/http_helper.rb:22:in `handler'\n./features/step_definitions/steps.rb:31:in `/^I receive confirmation of the creation$/'\nfeatures/payment_wirecard.feature:11:in `Then I receive confirmation of the creation'",
              "duration": 5297911
            }
          },
          {
            "keyword": "And ",
            "name": "I access my wirecard account",
            "line": 12,
            "match": {
              "location": "features/step_definitions/steps.rb:53"
            },
            "result": {
              "status": "skipped"
            }
          },
          {
            "keyword": "And ",
            "name": "the payment status of order must be pago",
            "line": 13,
            "match": {
              "location": "features/step_definitions/steps.rb:57"
            },
            "result": {
              "status": "skipped"
            }
          }
        ],
        "after": [
          {
            "match": {
              "location": "capybara-3.22.0/lib/capybara/cucumber.rb:10"
            },
            "result": {
              "status": "passed",
              "duration": 24699
            }
          }
        ]
      }
    ]
  }
]